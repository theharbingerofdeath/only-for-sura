<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Ultimate Valentine Journey ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Poppins', sans-serif; background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #fad0c4, #ffd1ff); background-size: 400% 400%; animation: gradient 15s ease infinite; height: 100vh; overflow: hidden; }
        @keyframes gradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        
        .font-romance { font-family: 'Dancing Script', cursive; }
        .glass { background: rgba(255, 255, 255, 0.4); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 20px; }
        
        /* Smooth Flipbook */
        .book-container { perspective: 2000px; }
        .book { width: 320px; height: 450px; position: relative; transform-style: preserve-3d; transition: transform 1s ease; }
        .page { 
            position: absolute; width: 100%; height: 100%; top: 0; left: 0; 
            transform-origin: left; transform-style: preserve-3d; transition: all 0.8s cubic-bezier(0.645, 0.045, 0.355, 1);
            cursor: pointer; border-radius: 0 15px 15px 0;
        }
        .page-content {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            padding: 30px; box-sizing: border-box; border: 1px solid rgba(255,192,203, 0.5);
            background: white; box-shadow: inset 5px 0 15px rgba(0,0,0,0.05);
        }
        .page-back { transform: rotateY(180deg); background: #fff5f7; }
        .flipped { transform: rotateY(-170deg) scale(1.02); z-index: 10 !important; }

        .heart-particle { position: fixed; pointer-events: none; z-index: 0; }
    </style>
</head>
<body x-data="valentineApp()">

    <audio id="bgMusic" loop>
        <source src="https://www.bensound.com/bensound-music/bensound-love.mp3" type="audio/mpeg">
    </audio>

    <template x-if="step === 'password'">
        <div class="fixed inset-0 z-[100] flex items-center justify-center p-6 bg-rose-100/80">
            <div class="glass p-10 max-w-sm w-full text-center shadow-2xl animate-bounce-short">
                <h1 class="text-2xl font-bold text-rose-600 mb-6">Masukkan Kode Rahasia ‚ù§Ô∏è</h1>
                <input type="password" x-model="inputPass" maxlength="8"
                       class="w-full p-4 text-center text-xl tracking-[0.5em] rounded-xl border-2 border-rose-300 focus:outline-none focus:ring-2 focus:ring-rose-500 mb-6"
                       placeholder="********">
                <button @click="checkPassword()" 
                        class="w-full bg-rose-500 text-white py-3 rounded-xl font-bold hover:bg-rose-600 transition">Buka Akses</button>
                <p x-show="error" x-transition class="mt-4 text-red-500 font-medium">Oops! Kode salah sayang. ‚ùå</p>
            </div>
        </div>
    </template>

    <template x-if="step === 'game'">
        <div class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-rose-50/50">
            <div class="glass p-8 text-center mb-10 shadow-lg">
                <h1 class="text-3xl font-romance font-bold text-rose-600">Catch 10 Hearts for Me!</h1>
                <p class="text-5xl font-bold mt-4 text-rose-500" x-text="score + '/10'"></p>
            </div>
            
            <div class="relative w-[350px] h-[350px] glass overflow-hidden cursor-pointer shadow-inner" @click="missClick()">
                <div x-show="score < 10" class="absolute text-5xl transition-all duration-300 transform -translate-x-1/2 -translate-y-1/2"
                     :style="`left: ${heartPos.x}%; top: ${heartPos.y}%;`" @click.stop="catchHeart()">‚ù§Ô∏è</div>
            </div>
        </div>
    </template>

    <template x-if="step === 'book'">
        <div class="min-h-screen flex flex-col items-center justify-center p-4">
            <div class="book-container">
                <div class="book" :style="currentPage > 0 ? 'transform: translateX(40%)' : ''">
                    
                    <div class="page z-[1]" :class="currentPage >= 5 ? 'flipped' : ''">
                        <div class="page-front page-content">
                            <h2 class="text-2xl font-romance font-bold text-rose-600">The Future</h2>
                            <p class="mt-4 text-center text-sm text-gray-600">I can't wait to spend the rest of my life with you. Happy Valentine's Day!</p>
                            <div class="mt-6 text-3xl">üíç‚ú®</div>
                        </div>
                    </div>

                    <div class="page z-[2]" :class="currentPage >= 4 ? 'flipped' : ''" @click="flipPage(5)">
                        <div class="page-front page-content">
                            <h2 class="text-xl font-bold text-rose-500">My Promise</h2>
                            <p class="mt-4 text-center text-sm italic">"Aku mungkin bukan yang pertama, tapi aku ingin menjadi yang terakhir untukmu."</p>
                        </div>
                        <div class="page-back page-content"></div>
                    </div>

                    <div class="page z-[3]" :class="currentPage >= 3 ? 'flipped' : ''" @click="flipPage(4)">
                        <div class="page-front page-content">
                            <h2 class="text-xl font-bold text-rose-500">Why I Love You</h2>
                            <div class="space-y-2 mt-4 text-sm text-gray-600">
                                <p>‚Ä¢ Your beautiful smile</p>
                                <p>‚Ä¢ The way you care for me</p>
                                <p>‚Ä¢ Your endless support</p>
                            </div>
                        </div>
                        <div class="page-back page-content"></div>
                    </div>

                    <div class="page z-[4]" :class="currentPage >= 2 ? 'flipped' : ''" @click="flipPage(3)">
                        <div class="page-front page-content">
                            <h2 class="text-xl font-bold text-rose-500">Memories</h2>
                            <div class="w-full h-32 bg-rose-100 rounded-lg flex items-center justify-center mb-2 text-rose-300">Insert Photo Here</div>
                            <p class="text-xs text-center">Setiap detik bersamamu adalah momen favoritku.</p>
                        </div>
                        <div class="page-back page-content"></div>
                    </div>

                    <div class="page z-[5]" :class="currentPage >= 1 ? 'flipped' : ''" @click="flipPage(1)">
                        <div class="page-front page-content bg-rose-500 !text-white">
                            <h1 class="text-4xl font-romance">Our Story</h1>
                            <p class="mt-4 opacity-75">By: [Nama Kamu]</p>
                            <p class="mt-10 animate-pulse text-xs">Tap to open &rarr;</p>
                        </div>
                        <div class="page-back page-content">
                            <h2 class="text-2xl font-bold text-rose-600">Chapter 1</h2>
                            <p class="mt-4 text-center text-gray-600 italic">"Everything started with a simple hello..."</p>
                        </div>
                    </div>

                </div>
            </div>
            <button @click="currentPage = 0" x-show="currentPage > 0" class="mt-10 glass px-6 py-2 text-rose-600 font-bold hover:bg-white transition">Tutup Buku</button>
        </div>
    </template>

    <script>
        function valentineApp() {
            return {
                step: 'password', // password -> game -> book
                inputPass: '',
                error: false,
                score: 0,
                heartPos: { x: 50, y: 50 },
                currentPage: 0,

                checkPassword() {
                    if (this.inputPass === '09050802') {
                        this.step = 'game';
                        this.spawnParticles();
                    } else {
                        this.error = true;
                        setTimeout(() => this.error = false, 2000);
                        this.inputPass = '';
                    }
                },

                catchHeart() {
                    this.score++;
                    if (this.score >= 10) {
                        this.step = 'book';
                        document.getElementById('bgMusic').play();
                    } else {
                        this.heartPos = { x: Math.random() * 80 + 10, y: Math.random() * 80 + 10 };
                    }
                },

                missClick() {
                    if (this.score > 0) {
                        alert("Fokus dong sayang! Skor balik 0 ya üòã");
                        this.score = 0;
                    }
                },

                flipPage(pageNum) {
                    if (this.currentPage < pageNum) {
                        this.currentPage = pageNum;
                    } else {
                        this.currentPage = pageNum - 1;
                    }
                },

                spawnParticles() {
                    setInterval(() => {
                        const p = document.createElement('div');
                        p.className = 'heart-particle';
                        p.innerHTML = '‚ù§Ô∏è';
                        p.style.left = Math.random() * 100 + 'vw';
                        p.style.fontSize = (Math.random() * 20 + 10) + 'px';
                        document.body.appendChild(p);
                        
                        gsap.to(p, {
                            y: -100,
                            x: (Math.random() - 0.5) * 200,
                            opacity: 0,
                            duration: Math.random() * 3 + 2,
                            onComplete: () => p.remove()
                        });
                    }, 300);
                }
            }
        }
    </script>
</body>
</html>
